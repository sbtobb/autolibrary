(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1b63"],{CeWO:function(e,t,a){},JhLU:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"d",function(){return l}),a.d(t,"a",function(){return r}),a.d(t,"b",function(){return o});var i=a("t3Un");function n(e){return Object(i.a)({url:"/api/admin/getUserInfoPage",method:"get",params:e})}function l(e){return Object(i.a)({url:"/api/admin/getUserLoginLog",method:"get",params:e})}function r(e){return Object(i.a)({url:"/api/admin/changeIntegral",method:"get",params:e})}function o(e){return Object(i.a)({url:"/api/admin/getListUserBook",method:"get",params:e})}},p2kX:function(e,t,a){"use strict";var i=a("CeWO");a.n(i).a},zdTP:function(e,t,a){"use strict";a.r(t);var i=a("JhLU"),n={data:function(){return{listLoading:!0,dialogFormVisible:!1,dialogTableVisible:!1,listQuery:{currentPage:1,pageSize:10},changeIntegralQuery:{userInfoId:0,integral:0},getListUserBookQuery:{userID:0},tableData:void 0,gridData:void 0,form:{index:0,userID:0,integral:0,name:"123"},formLabelWidth:"120px"}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(i.c)(this.listQuery).then(function(t){e.tableData=t.data,e.listLoading=!1})},handleSizeChange:function(e){console.log(e)},handleCurrentChange:function(e){this.listQuery.currentPage=e,this.getList()},handleEdit:function(e,t){this.dialogFormVisible=!0,this.form.index=e,this.form.name=t.name,this.form.userID=t.user_id,this.integral=t.integral,console.log(e,t)},handleBorrow:function(e,t){var a=this;this.getListUserBookQuery.userID=t,Object(i.b)(this.getListUserBookQuery).then(function(e){a.gridData=e.data}),this.dialogTableVisible=!0,console.log(e,t)},handleChange:function(e){this.form.integral=e},handleConfirm:function(){var e=this;this.dialogFormVisible=!1,this.changeIntegralQuery.userInfoId=this.form.userID,this.changeIntegralQuery.integral=this.form.integral,Object(i.a)(this.changeIntegralQuery).then(function(t){2e4===t.code&&(e.tableData[e.form.index].integral=e.form.integral,e.$message({message:"恭喜你，修改成功",type:"success"}))})}}},l=(a("p2kX"),a("KHd+")),r=Object(l.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"用户姓名"}},[a("span",[e._v(e._s(t.row.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("span",[e._v(e._s(t.row.gender))])]),e._v(" "),a("el-form-item",{attrs:{label:"用户 ID"}},[a("span",[e._v(e._s(t.row.user_id))])]),e._v(" "),a("el-form-item",{attrs:{label:"电子邮箱"}},[a("span",[e._v(e._s(t.row.email))])]),e._v(" "),a("el-form-item",{attrs:{label:"剩余积分"}},[a("span",[e._v(e._s(t.row.integral))])]),e._v(" "),a("el-form-item",{attrs:{label:"注册时间"}},[a("span",[e._v(e._s(t.row.register_time))])]),e._v(" "),a("el-form-item",{attrs:{label:"修改时间"}},[a("span",[e._v(e._s(t.row.modified_time))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用户 ID",prop:"user_id"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户姓名",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"邮件地址",prop:"email"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleBorrow(t.$index,t.row.user_id)}}},[e._v("查看借书")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogTableVisible,title:"用户所借书籍"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.gridData}},[a("el-table-column",{attrs:{property:"user_book_id",label:"用户书籍 ID",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{property:"title",label:"书名",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{property:"tag",label:"电子标签"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"修改积分"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"用户名"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"用户积分"}},[a("el-input-number",{attrs:{min:1,label:"积分"},on:{change:e.handleChange},model:{value:e.form.integral,callback:function(t){e.$set(e.form,"integral",t)},expression:"form.integral"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticClass:"pagination-center"},[a("el-pagination",{attrs:{"page-size":10,"pager-count":9,total:100,layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)},[],!1,null,null,null);r.options.__file="index.vue";t.default=r.exports}}]);