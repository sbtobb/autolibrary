(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6266"],{CPi6:function(t,e,a){},cFNU:function(t,e,a){"use strict";a.r(e);var i=a("sGf8"),n={data:function(){return{listLoading:!0,gridLoading:!0,dialogTagVisible:!1,tableData:void 0,gridData:void 0,listQuery:{currentPage:1,pageSize:10},formInline:{bookInfoId:0,tag:""},formISBN:{isbn:""},formLabelWidth:"120px"}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(i.d)(this.listQuery).then(function(e){t.tableData=e.data,t.listLoading=!1})},getGridList:function(){var t=this;this.gridLoading=!0,Object(i.e)(this.formInline).then(function(e){t.gridData=e.data,t.gridLoading=!1})},handleTag:function(t,e){this.dialogTagVisible=!0,this.formInline.bookInfoId=e.book_info_id,this.getGridList(),console.log(t,e)},handleCurrentChange:function(t){this.listQuery.currentPage=t,this.getList(),console.log(t)},onSubmit:function(){var t=this;Object(i.a)(this.formInline).then(function(e){t.$message({message:"恭喜你，添加成功",type:"success"}),t.getGridList()})},onSubmitISBN:function(){var t=this;Object(i.b)(this.formISBN).then(function(e){2e4===e.code&&(t.$message({message:e.data,type:"success"}),t.getList())})}}},o=(a("kf3S"),a("KHd+")),r=Object(o.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formISBN}},[a("el-form-item",{attrs:{label:"添加图书"}},[a("el-input",{attrs:{placeholder:"ISBN"},model:{value:t.formISBN.isbn,callback:function(e){t.$set(t.formISBN,"isbn",e)},expression:"formISBN.isbn"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitISBN}},[t._v("添加")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"信息 ID"}},[a("span",[t._v(t._s(e.row.book_info_id))])]),t._v(" "),a("el-form-item",{attrs:{label:"书名"}},[a("span",[t._v(t._s(e.row.title))])]),t._v(" "),a("el-form-item",{attrs:{label:"副标题"}},[a("span",[t._v(t._s(e.row.subtitle))])]),t._v(" "),a("el-form-item",{attrs:{label:"图片地址"}},[a("span",[t._v(t._s(e.row.pic))])]),t._v(" "),a("el-form-item",{attrs:{label:"简介"}},[a("span",[t._v(t._s(e.row.summary))])]),t._v(" "),a("el-form-item",{attrs:{label:"价格"}},[a("span",[t._v(t._s(e.row.price))])]),t._v(" "),a("el-form-item",{attrs:{label:"ISBN"}},[a("span",[t._v(t._s(e.row.isbn))])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"图片",prop:"pic"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.pic,alt:"",height:"50px"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"书名",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"价格",prop:"price"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleTag(e.$index,e.row)}}},[t._v("电子标签")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogTagVisible,title:"用户所借书籍"},on:{"update:visible":function(e){t.dialogTagVisible=e}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",{attrs:{label:"电子标签"}},[a("el-input",{attrs:{placeholder:"电子标签"},model:{value:t.formInline.tag,callback:function(e){t.$set(t.formInline,"tag",e)},expression:"formInline.tag"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("添加")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.gridLoading,expression:"gridLoading"}],attrs:{data:t.gridData}},[a("el-table-column",{attrs:{property:"book_tag_id",label:"书籍标签 ID",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"book_info_id",label:"书籍信息 ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"tag",label:"电子标签"}}),t._v(" "),a("el-table-column",{attrs:{property:"status",label:"是否借出"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:1===e.row.status?"primary":"success","disable-transitions":""}},[t._v(t._s(1===e.row.status?"借出":"未借出"))])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination-center"},[a("el-pagination",{attrs:{"page-size":10,"pager-count":9,total:100,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)],1)},[],!1,null,null,null);r.options.__file="index.vue";e.default=r.exports},kf3S:function(t,e,a){"use strict";var i=a("CPi6");a.n(i).a},sGf8:function(t,e,a){"use strict";a.d(e,"d",function(){return n}),a.d(e,"b",function(){return o}),a.d(e,"e",function(){return r}),a.d(e,"a",function(){return l}),a.d(e,"c",function(){return s});var i=a("t3Un");function n(t){return Object(i.a)({url:"/api/admin/getBookInfoPage",method:"get",params:t})}function o(t){return Object(i.a)({url:"/api/admin/addBookWithISBN",method:"get",params:t})}function r(t){return Object(i.a)({url:"/api/admin/getBookTagList",method:"get",params:t})}function l(t){return Object(i.a)({url:"/api/admin/addBookTag",method:"get",params:t})}function s(t){return Object(i.a)({url:"/api/admin/getBookBorrowLogPage",method:"get",params:t})}}}]);